{"ast":null,"code":"import _objectSpread from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Axios from'axios';import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Link}from'react-router-dom';import ToText from'../../../utils/ToText';import'./ShowPost.css';import avtar from'../../../assets/avtar.jpg';import Spinner from'../../../Containers/Spinner/Spinner';function ShowPost(props){var _post$user,_post$user2;var _useState=useState(props),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setpost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errmsg=_useState6[0],setErrorMsg=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),errcode=_useState8[0],setErrorCode=_useState8[1];var history=useHistory();var pathname=history.location.pathname;useEffect(function(){setLoading(true);Axios.get(\"/profile/bycreator/\"+props.creator).then(function(data){setLoading(false);setpost(_objectSpread(_objectSpread({},props),{},{user:data.data.profile}));}).catch(function(e){setLoading(false);});},[props]);return/*#__PURE__*/React.createElement(React.Fragment,null,errcode?/*#__PURE__*/React.createElement(\"div\",{className:\"container error container-short\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mar-20\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Error Code - \",errcode),/*#__PURE__*/React.createElement(\"h4\",null,\"Error Message - \",errmsg))):null,loading?/*#__PURE__*/React.createElement(\"div\",{className:\"container loading\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mar-20\"},/*#__PURE__*/React.createElement(Spinner,null))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-6 col-xs-12 showblog mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"showblog_card card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"showblog_card_image\",style:{backgroundImage:\"url(\".concat(props.imagePath,\")\")}},/*#__PURE__*/React.createElement(\"div\",{className:\"show_auth_img\"},/*#__PURE__*/React.createElement(Link,{to:\"/public/\"+((_post$user=post.user)===null||_post$user===void 0?void 0:_post$user.username),style:{backgroundImage:\"url(\".concat((_post$user2=post.user)!==null&&_post$user2!==void 0&&_post$user2.imagePath?post.user.imagePath:avtar,\")\")}},\"By Mehul\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-title pt-3\"},pathname===\"/mypost\"?/*#__PURE__*/React.createElement(Link,{to:'/mypost/'+props._id,className:\"title\"},props.title):/*#__PURE__*/React.createElement(Link,{to:'/post/'+props._id,className:\"title\"},props.title)),/*#__PURE__*/React.createElement(\"p\",{className:\"showblog_content\"},\"\".concat(ToText(props.content.substring(0,80)),\"...\"),/*#__PURE__*/React.createElement(\"span\",null,\" \",/*#__PURE__*/React.createElement(\"b\",null,\"Read More\")))))));}export default ShowPost;","map":{"version":3,"names":["Axios","React","useState","useEffect","useHistory","Link","ToText","avtar","Spinner","ShowPost","props","_post$user","_post$user2","_useState","_useState2","_slicedToArray","post","setpost","_useState3","_useState4","loading","setLoading","_useState5","_useState6","errmsg","setErrorMsg","_useState7","_useState8","errcode","setErrorCode","history","pathname","location","get","creator","then","data","_objectSpread","user","profile","catch","e","createElement","Fragment","className","style","backgroundImage","concat","imagePath","to","username","_id","title","content","substring"],"sources":["C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/src/Components/Posts/ShowPost/ShowPost.js"],"sourcesContent":["import Axios from 'axios'\nimport React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport { Link } from 'react-router-dom'\nimport ToText from '../../../utils/ToText'\nimport './ShowPost.css'\nimport avtar from '../../../assets/avtar.jpg'\nimport Spinner from '../../../Containers/Spinner/Spinner';\nfunction ShowPost(props) {\n\n    const [post, setpost] = useState(props)\n    const [loading, setLoading] = useState(false)\n    const [errmsg, setErrorMsg] = useState()\n    const [errcode, setErrorCode] = useState()\n    const history = useHistory()\n    const pathname = history.location.pathname\n\n    useEffect(() => {\n        setLoading(true)\n        Axios.get(\"/profile/bycreator/\" + props.creator).then(data => {\n            setLoading(false)\n            setpost({ ...props, user: data.data.profile })\n        })\n            .catch(e => {\n                setLoading(false)\n            })\n\n    }, [props])\n\n    return (<>\n        {errcode ?\n            <div className=\"container error container-short\">\n                <div className=\"mar-20\">\n                    <h5>Error Code - {errcode}</h5>\n                    <h4>Error Message - {errmsg}</h4>\n                </div>\n            </div>\n            : null}\n\n        {loading ?\n            <div className=\"container loading\">\n                <div className=\"mar-20\">\n                    <Spinner />\n                </div>\n            </div>\n            : null}\n        <div className=\"col-md-6 col-sm-6 col-xs-12 showblog mb-3\">\n            <div className=\"showblog_card card\">\n                <div className=\"showblog_card_image\"\n                    style={{ backgroundImage: `url(${props.imagePath})` }}>\n\n\n                    <div className=\"show_auth_img\">\n                        <Link to={\"/public/\" + post.user?.username} style={{ backgroundImage: `url(${post.user?.imagePath ? post.user.imagePath : avtar})` }}>By Mehul</Link>\n                    </div>\n                </div>\n                <div className=\"card-body\">\n                    <h5 className=\"card-title pt-3\">\n                        {pathname === \"/mypost\" ?\n                            <Link\n                                to={'/mypost/' + props._id}\n                                className=\"title\">\n                                {props.title}\n                            </Link> :\n\n                            <Link\n                                to={'/post/' + props._id}\n                                className=\"title\">\n                                {props.title}\n                            </Link>\n                        }\n\n                    </h5>\n\n                    <p className=\"showblog_content\">\n                        {`${ToText(\n                            props.content.substring(0, 80)\n                        )}...`}<span> <b>Read More</b></span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </>\n    )\n}\n\nexport default ShowPost\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}