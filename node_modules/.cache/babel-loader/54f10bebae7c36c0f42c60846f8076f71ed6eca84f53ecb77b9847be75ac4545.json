{"ast":null,"code":"import _objectSpread from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import Axios from'axios';import React,{Component}from'react';import{Link}from'react-router-dom';import Spinner from'../../../Containers/Spinner/Spinner';import ShowPost from'../../Posts/ShowPost/ShowPost';import'./Profile.css';export var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.state={user:{},posts:[],isloading:false,error:{message:'',code:''}};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var path=this.props.match.path;var id=this.props.match.params.id;this.setState(function(pre){return{isloading:true};});var storedData=JSON.parse(localStorage.getItem('profileData'));if(!storedData&&path===\"/profile\"){this.props.history.push(\"/createProfile\");}if(id){Axios.get('/profile/'+id).then(function(data){_this2.setState(_objectSpread(_objectSpread({},_this2.state.user),{},{user:data.data.profile,isloading:false}));return Axios.get('/profile/'+id+'/mypost');}).then(function(data){_this2.setState(_objectSpread(_objectSpread({},_this2.state.posts),{},{posts:data.data.post,isloading:false}));}).catch(function(e){_this2.setState({isloading:false,error:_objectSpread(_objectSpread({},_this2.state.error),{},{message:e.response.data.message,code:e.response.status})});});}else{var _id;Axios.get('/profile/viewprofile').then(function(data){_id=data.data.profile.username;_this2.setState(_objectSpread(_objectSpread({},_this2.state.user),{},{user:data.data.profile,isloading:false}));Axios.get('/profile/'+_id+'/mypost').then(function(data){_this2.setState(_objectSpread(_objectSpread({},_this2.state.posts),{},{posts:data.data.post,isloading:false}));});}).catch(function(e){_this2.setState({isloading:false,error:_objectSpread(_objectSpread({},_this2.state.error),{},{message:e.response.data.message,code:e.response.status})});});}}},{key:\"render\",value:function render(){var storedData=JSON.parse(localStorage.getItem('profileData'));var path=this.props.match.path;var isLoading;var iserror;if(this.state.isloading){isLoading=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container loading\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mar-20\"},/*#__PURE__*/React.createElement(Spinner,null))));}if(this.state.error.code){iserror=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container error container-short\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mar-20\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Error Code - \",this.state.error.code),/*#__PURE__*/React.createElement(\"h4\",null,\"Error Message - \",this.state.error.message))));}var fetchedposts;if(this.state.posts){fetchedposts=this.state.posts.map(function(post,index){return/*#__PURE__*/React.createElement(ShowPost,Object.assign({key:index},post,index));});}var profile=this.state.user;return/*#__PURE__*/React.createElement(React.Fragment,null,isLoading,iserror,/*#__PURE__*/React.createElement(\"div\",{className:\"container py-5 container-short\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-xs-12 order-2 order-lg-1\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-black font-weight-light mb-4\"},profile.username),!storedData&&path!==\"/profile\"?null:/*#__PURE__*/React.createElement(Link,{to:\"/profile/edit/\"+profile._id},\"Edit Profile\"),/*#__PURE__*/React.createElement(\"p\",null,profile.bio)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-xs-12 order-1 order-lg-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid w-50 rounded-circle mb-3\",src:profile.imagePath,alt:profile.username})))),/*#__PURE__*/React.createElement(\"div\",{className:\"container py-5 container-short\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"font-weight-light text-black\"},profile.username,\"'s Posts\"),/*#__PURE__*/React.createElement(\"hr\",null),this.state.posts.length===0?/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-5 text-center\"},\"No Posts Found\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},fetchedposts)));}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"names":["Axios","React","Component","Link","Spinner","ShowPost","Profile","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","user","posts","isloading","error","message","code","_createClass","key","value","componentDidMount","_this2","path","match","id","params","setState","pre","storedData","JSON","parse","localStorage","getItem","history","push","get","then","data","_objectSpread","profile","post","catch","e","response","status","username","render","isLoading","iserror","createElement","Fragment","className","fetchedposts","map","index","Object","assign","to","_id","bio","src","imagePath","alt","length"],"sources":["C:/Users/Keshara1997/Downloads/Blogapp-using-MERN-main/Blogapp-using-MERN-main/src/Components/Users/Profile/Profile.js"],"sourcesContent":["import Axios from 'axios'\nimport React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport Spinner from '../../../Containers/Spinner/Spinner'\nimport ShowPost from '../../Posts/ShowPost/ShowPost'\nimport './Profile.css'\nexport class Profile extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            user: {},\n            posts: [],\n            isloading: false,\n            error: {\n                message: '',\n                code: ''\n            },\n        }\n    }\n\n    componentDidMount() {\n        let path = this.props.match.path\n        let id = this.props.match.params.id\n\n        this.setState(pre => ({\n            isloading: true\n        }))\n        const storedData = JSON.parse(localStorage.getItem('profileData'));\n\n        if (!storedData && path === \"/profile\") {\n            this.props.history.push(\"/createProfile\")\n        }\n\n        if (id) {\n            Axios.get('/profile/' + id).then(data => {\n                this.setState({ ...this.state.user, user: data.data.profile, isloading: false });\n                return Axios.get('/profile/' + id + '/mypost')\n            }).then(data => {\n                this.setState({ ...this.state.posts, posts: data.data.post, isloading: false });\n            }).catch(e => {\n                this.setState({\n                    isloading: false,\n                    error: {\n                        ...this.state.error, message: e.response.data.message,\n                        code: e.response.status\n                    }\n                });\n\n            })\n        }\n        else {\n            let id\n            Axios.get('/profile/viewprofile').then(data => {\n                id = data.data.profile.username\n                this.setState({ ...this.state.user, user: data.data.profile, isloading: false });\n\n                Axios.get('/profile/' + id + '/mypost').then(data => {\n                    this.setState({ ...this.state.posts, posts: data.data.post, isloading: false });\n                })\n            }).catch(e => {\n                this.setState({\n                    isloading: false,\n                    error: {\n                        ...this.state.error, message: e.response.data.message,\n                        code: e.response.status\n                    }\n                });\n            })\n\n\n        }\n    }\n\n    render() {\n        const storedData = JSON.parse(localStorage.getItem('profileData'));\n        let path = this.props.match.path\n        let isLoading\n        let iserror\n\n        if (this.state.isloading) {\n\n            isLoading = (\n                <>\n                    <div className=\"container loading\">\n                        <div className=\"mar-20\">\n                            <Spinner />\n                        </div>\n                    </div>\n                </>\n            )\n        }\n\n        if (this.state.error.code) {\n            iserror = (\n                <>\n                    <div className=\"container error container-short\">\n                        <div className=\"mar-20\">\n                            <h5>Error Code - {this.state.error.code}</h5>\n                            <h4>Error Message - {this.state.error.message}</h4>\n                        </div>\n                    </div>\n                </>\n            )\n        }\n\n        let fetchedposts\n        if (this.state.posts) {\n            fetchedposts = this.state.posts.map((post, index) => (\n                <ShowPost key={index} {...post} {...index} />\n            ))\n        }\n        let profile = this.state.user\n\n        return (\n            <>\n                {isLoading}\n                {iserror}\n                <div className=\"container py-5 container-short\">\n                    <div className=\"row profile\">\n                        <div className=\"col-md-8 col-xs-12 order-2 order-lg-1\">\n                            <h2 className=\"text-black font-weight-light mb-4\">{profile.username}</h2>\n                            {(!storedData && path !== \"/profile\") ? null : <Link to={\"/profile/edit/\" + profile._id}  >Edit Profile</Link>}\n                            <p>{profile.bio}</p>\n                        </div>\n\n                        <div className=\"col-md-4 col-xs-12 order-1 order-lg-2\">\n                            <img className=\"img-fluid w-50 rounded-circle mb-3\"\n                                src={profile.imagePath} alt={profile.username}></img>\n                        </div>\n                    </div>\n\n                </div>\n\n                <div className=\"container py-5 container-short\">\n                    <h2 className=\"font-weight-light text-black\">{profile.username}'s Posts</h2>\n                    <hr />\n                    {this.state.posts.length === 0 ? <h2 className=\"mt-5 text-center\">No Posts Found</h2> : null}\n                    <div className=\"row\">\n                        {fetchedposts}\n                    </div>\n\n                </div>\n            </>\n        )\n    }\n}\n\nexport default Profile\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}